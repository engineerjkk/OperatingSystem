#  쓰레드

* 프로세스와 쓰레드 대략적인 명령을 내리면 생긴다. 
* 독립성이 있으면 세개가 서로 병렬적으로 실행된다. 그런 순서를 독립적으로 나누면 그럴 이유가 없다. 
* 프로세스와 쓰레드라고 부른다. 프로세스는 자원들을 할당받으면 오너십 소유권을 갖는다. 
* 프로세스는 실행하면 이미지가 만들어진다. 
* 프로세스들 사이에 원치않는 interference 바람직한게 아니다.
* CPU와 CPU끼리 번갈아가며 사용하게 된다. 


* 프로세스 안에 독립적으로 실행될 수 있는 코드 부분을 스레드라고 부른다.
* 사전적 의미 : 실(지렁이) : 명령어가 실행되는 궤적을 쓰레드라고 한다. 
* 컴퓨터시스템의 자원들을 할당받으면 프로세스가 한다. 
* 프로세스는 실행하면 이미지가 만들어진다.
* 메모리공간에 프로세스 이미지를 저장하는 공간을 확보하게 된다. 
* 운영체제는 반복하지만 프로세스들 사이에 원치않는 개입을 하는건 바람직하지 않다.  

* 디스패칭 : 레디상태 메모리에 있다가 CPU를 할당받아 실행할 수 있게끔한다. 
* 디스패치의 단위를 스레드로 할 수 있다. 

* 프로세스 이미지 스택, 데이터 영역, 자우너에 대한 소유권을 포함하고 있지만 **쓰레드는 실행의 단위이기 때문에 lightweight이다. **

* 멀티쓰레딩 : 스레드를 한개가 아니라 주로 여러개를 실행하는것을 말한다. 
-> single proces내에서 multithreading이다. 

* 네모를 프로세스로 표현하고 그 내부를 스레드라고 표현한다.

* 프로세스 : 자원할당 단위
* execution stack
* 프로세스 이미지

* printf : 커널에 코드를 불러서 터미널(I/O)에 access 하는 것이다. 

* 쓰레드의 이점
1. 쓰레드는 프로세스보다 크기가 작다.
2. 프로세스들 사이에서 스위칭(컨택스위칭)보다 스레드사이의스위칭이 시간이 적게 걸린다.
3. 외부 통신을했을때 시간이 매우 오래걸리지만 스레드를 할당해서 하는게 효율적이다.
4. 시간이 적게 걸린다. 

* 놀리아는 multiuser system이지만 내 pc는 single-user system이다. 
1. 명령어를 치면 곧바로 명령어를 보여주는 것이 foreground이다. 
2. Asynchronous processing 
3. Speed of execution
4. Modular program structure

* 쓰레드 (대부분의 운영체제는 쓰레드를 지원한다.)

# 쓰레드의 상태
1. Running : CPU를 할당받은 상태
2. Ready : 메모리를 할당하고 실행준비
3. I/O가 일어나길 기다리는 상태

1. Spawn : 스레드가 또다른 스레드를 만든다.
2. block 
3. unblock
4. finish

* 프로세스의 모든 스레드들은 똑같은 address space를 가지고 있다. 
* 한 스레드가 자원을 할당 받아서 쓰다가 교대로 번갈아가면서 쓴다. 

# 4.2 쓰레드의 유형
* 쓰레드구현에는 사용자 수준 쓰레드(ULT)와 커널 수준 쓰레드(KLT)의 두가지 범주가 있다. 

1. 사용자 수준 쓰레드
2. 커널 수준 쓰레드

* 대부분의 운영체제는 M:1이다. 하나의 프로세스에 여러개의 스레드를 사용한다. 


* 멀티스레드 응용프로그램?
* 데이터베이스의 대부분은 오라클을 사용한다. 그때 process에 single 스레드를 사용하나 멀티프로세스를 사용한다. 

* 쓰레드만 사용하면 된다. 

한개의 CPU 속도/N개의 병렬처리 CPU 속도 = SpeedUp
- 따라서 사용된 CPU는 4개이지만 실제 얻을 수 있는 효과는 2.5배로 절반보다 좀 높은정도이다.
